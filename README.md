# Task Manager Application

A modern, feature-rich Task Management application built with Spring Boot, demonstrating best practices in web application development. This project serves as a showcase of AI-driven development using Cascade AI Agent in the Windsurf editor.

## Overview

This Task Manager is a web application that helps users organize and track their tasks efficiently. What makes this project unique is that the entire codebase was generated by the Cascade AI Agent with minimal human supervision, demonstrating the capabilities of modern AI-assisted development.

The application is being developed incrementally, with new features being added in a series of development iterations, each documented in video format showing the interaction between human developer and AI agent.

## AI-Driven Development

This project showcases:
- Full codebase generation by Cascade AI Agent
- Best practices in software development automatically applied by AI
- Human-AI collaboration in software development
- Practical application of AI agents in real-world projects

## Features

- Task Management
  - Create, read, update, and delete tasks
  - Task properties: title, description, status, priority, due date
  - Filter tasks by status and priority
  - Sort tasks by various fields
  - Pagination support

- MongoDB Integration
  - Persistent storage using MongoDB
  - Automatic sample data seeding
  - MongoDB Express UI for database management

- Authentication & Authorization
  - MongoDB-based user authentication
  - Role-based access control (USER, ADMIN)
  - BCrypt password encoding
  - JWT authentication support
  - Automatic test user creation

### Core API (Current)
- RESTful API endpoints for task management
- CRUD operations for tasks
- Advanced task filtering and search capabilities
- Pagination support
- Proper error handling and validation

### Task Properties
- Unique identifier
- Name and description
- Due date
- Priority levels
- Status tracking
- Tag support for better organization

## Technical Stack

### Backend
- Java 17
- Spring Boot
- Spring Web
- Maven for dependency management
- RESTful API design

## Project Structure

```
src/main/java/com/grabduck/taskmanager/
├── controller/         # REST API endpoints
├── domain/            # Domain models
├── dto/               # Data Transfer Objects
├── exception/         # Custom exceptions and error handling
└── service/          # Business logic layer
```

## Development Branches

The project is organized into feature branches, each representing a significant development milestone:

- [`feature/task-api-foundation`](https://github.com/esurovtsev/task-manager/tree/feature/task-api-foundation): Initial API implementation with core task management functionality
  - [Watch the development video](https://youtu.be/BPaF68MU4aM?si=7NnMAw4zf2Ed6Zbe) to see how this foundation was built using Cascade AI Agent
- [`feature/mongodb-persistence`](https://github.com/esurovtsev/task-manager/tree/feature/mongodb-persistence): MongoDB persistence layer implementation
  - [Watch the development video](https://youtu.be/HO0VcvkWpPA?si=u9WjEj7a4io7jg3K) to see how MongoDB persistence was implemented using Cascade AI Agent
  - This branch implements MongoDB persistence layer for the Task Manager application. Key features:
    - MongoDB integration with Spring Data MongoDB
    - Task document model and repository implementation
    - Advanced task filtering and search capabilities using MongoDB queries
    - Automatic database seeding with sample tasks on application startup
    - Docker Compose configuration for MongoDB and Mongo Express

  To run the application with MongoDB:
  1. Start MongoDB using Docker Compose:
     ```bash
     docker compose up -d
     ```
  2. Access MongoDB Express UI at http://localhost:8081
  3. Start the application - it will automatically connect to MongoDB and seed sample tasks
- [`feature/user-auth`](https://github.com/esurovtsev/task-manager/tree/feature/user-auth): Implements user authentication and authorization using MongoDB:
  - User domain model with roles (USER, ADMIN)
  - MongoDB-based user repository
  - Spring Security integration with MongoDB authentication
  - Test user seeding for development
  - BCrypt password encoding

  Default test user credentials:
  - Username: `user-new`
  - Password: `123`
  - Role: `USER`
- [`feature/user-registration-endpoint`](https://github.com/esurovtsev/task-manager/tree/feature/user-registration-endpoint): Implements secure user registration functionality:
  - [Watch the development video: Build Secure User APIs with Windsurf AI](https://www.youtube.com/watch?v=iYAkj2Tk6BU)
  - Secure user registration endpoint with password hashing
  - User DTO with role management
  - Global exception handling for registration errors
  - Protection against user enumeration attacks
  - Automatic USER role assignment for new users
- [`feature/task-ownership-and-access-control`](https://github.com/esurovtsev/task-manager/tree/feature/task-ownership-and-access-control): Implements user-based task ownership and access control:
  - [Watch the development video](https://www.youtube.com/watch?v=X9CKy6YqLYE) to see how task ownership and access control were implemented using Cascade AI Agent
  - This branch implements secure task ownership and access control functionality. Key features:
    - Task ownership tracking with ownerId field
    - User-specific task access restrictions
    - Owner-based CRUD operations validation
    - Enhanced repository layer with owner-specific filtering
    - Secure task management ensuring users can only access their own tasks
- [`feature/jwt-auth-migration`](https://github.com/esurovtsev/task-manager/tree/feature/jwt-auth-migration): Implements JWT token-based authentication:
  - [Watch the development video](https://www.youtube.com/watch?v=ZlqpNfwjDhE) to see how JWT authentication was implemented using Cascade AI Agent
  - This branch migrates from Basic Authentication to JWT token-based authentication. Key features:
    - JWT token generation and validation
    - Secure authentication endpoints for token acquisition
    - JWT-based request filtering and validation
    - Integration with existing user management
    - Enhanced security with configurable token expiration
    - Comprehensive test coverage for authentication flow

  To authenticate:
  1. Obtain JWT token using login endpoint:
     ```bash
     curl -X POST http://localhost:8080/api/v1/auth/login -H "Content-Type: application/json" -d '{"username":"user-new","password":"123"}'
     ```
  2. Use the token in subsequent requests:
     ```bash
     curl -H "Authorization: Bearer <your_token>" http://localhost:8080/api/v1/tasks
     ```
- More branches will be added as new features are developed

## Getting Started

### Prerequisites
- Java 17 or higher
- Maven 3.6 or higher

### Building the Project
```bash
mvn clean install
```

### Running the Application
```bash
mvn spring-boot:run
```

The application will start on `http://localhost:8080`

## Authentication

### JWT Authentication
The application uses JWT (JSON Web Token) based authentication for secure API access. This replaces the previous Basic Authentication mechanism.

#### Authentication Flow
1. Client obtains a JWT token by authenticating with credentials
2. Client includes the JWT token in subsequent requests
3. Server validates the token and processes the request
4. Token automatically expires after the configured duration

#### Authentication Endpoints
- `POST /api/v1/auth/login` - Obtain JWT token
  - Request body: `{"username": "string", "password": "string"}`
  - Returns: `{"token": "JWT_TOKEN", "type": "Bearer"}`

#### Using JWT Authentication
1. First, obtain a JWT token by calling the login endpoint
2. Include the token in subsequent requests using the Authorization header:
   ```
   Authorization: Bearer <your_jwt_token>
   ```

#### Security Features
- Secure token generation using SHA-256 encryption
- Configurable token expiration (default: 24 hours)
- Token blacklisting for logged-out tokens
- Protection against common JWT attacks

### Migration Guide from Basic Auth

#### For API Clients
1. Update authentication flow:
   - Instead of sending credentials with each request, obtain a JWT token first
   - Store the token securely
   - Include token in Authorization header for subsequent requests

2. Header format changes:
   - Old: `Authorization: Basic base64(username:password)`
   - New: `Authorization: Bearer jwt_token`

3. Error handling:
   - New error response for expired/invalid tokens: 401 Unauthorized
   - Token refresh mechanism for expired tokens (coming soon)

#### Breaking Changes
- Basic Authentication is no longer supported
- All API endpoints now require JWT Authentication
- Authentication header format has changed
- New authentication endpoint required for initial token acquisition

## API Documentation

### Authentication
All endpoints (except user registration and login) require JWT Authentication. Include the JWT token in the Authorization header:
```
Authorization: Bearer your_jwt_token
```

To obtain a token, use the login endpoint with your credentials:
```bash
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "user-new", "password": "123"}'
```

### Available Endpoints

#### Users
- `POST /api/v1/users` - Register a new user (no authentication required)
  - Request body: `{"username": "string", "password": "string", "email": "string"}`
  - Returns: User details without password

#### Tasks
- `POST /api/v1/tasks` - Create a new task
- `GET /api/v1/tasks` - Get paginated list of tasks with filtering options
- `GET /api/v1/tasks/{id}` - Get task by ID
- `PUT /api/v1/tasks/{id}` - Update an existing task
- `DELETE /api/v1/tasks/{id}` - Delete a task

## Contributing

This project is part of a development workshop series. Each major feature addition is documented and can be found in its corresponding branch.

## License

This project is open source and available under the [MIT License](LICENSE).

---
*Note: This is a living document that will be updated as new features are added to the application.*
